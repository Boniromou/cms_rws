<%= bread_crumb("glyphicon glyphicon-user",t("tree_panel.player_management"),t("tree_panel.create_player")) %>

<section class='smart-form'>
  <%= form_for @player, :remote => true, html: {autocomplete: :off } do |f| %>
    <fieldset style='padding: 1px;'>
      <div class='row' style='padding-bottom: 10px;'>
        <div class='col col-2'>
          <label class='input'>
            <%= f.label :card_id, t("general.card_id") %>:
          </label>
        </div>
        <div class='col col-3'>
          <label class='input'>
            <%= f.text_field :card_id, autofocus: true, pattern: '^\d+$', oninput: 'validateNumberOnlyAndMaxLength($(this), value, CARD_ID_LENGTH_LIMIT)' %>
          </label>
        </div>
        <div class='col col-3'>
          <label class='invisible_error'>
            <%= t("create_player.card_id_length_error") %>
          </label>
        </div>
      </div>
      <div class='row' style='padding-bottom: 10px;'>
        <div class='col col-2'>
          <label class='input'>
            <%= f.label :name, t("general.name") %>:
          </label>
        </div>
        <div class='col col-3'>
          <label class='input'>
            <%= f.text_field :player_name %>
          </label>
        </div>
        <div class='col col-3'>
          <label class='invisible_error'>
            <%= t("create_player.name_blank_error") %>
          </label>
        </div>
      </div>
      <div class='row' style='padding-bottom: 10px;'>
        <div class='col col-2'>
          <label class='input'>
            <%= f.label :member_id, t("general.member_id") %>:
          </label>
        </div>
        <div class='col col-3'>
          <label class='input'>
            <%= f.text_field :member_id, pattern: '^\d+$', oninput: 'validateNumberOnlyAndMaxLength($(this), value, MEMBER_ID_LENGTH_LIMIT)' %>
          </label>
        </div>
        <div class='col col-3'>
          <label class='invisible_error'>
            <%= t("create_player.member_id_length_error") %>
          </label>
        </div>
      </div>
      
      <div class='row'>
        <div class='col col-5'>
          <footer>
            <%= f.submit t("button.create"), class: 'btn btn-primary pull-right', id: 'create_player_submit' %>
          </footer>
        </div>
      <div>
    </fieldset>
  <% end %>
</section>

<%= javascript_include_tag "validate.input.js" %>
<%= javascript_include_tag "validate.player.info.js" %>

<script>
  var form_id = "new_player";
  var lengthLimit = [CARD_ID_LENGTH_LIMIT, MEMBER_ID_LENGTH_LIMIT, 0];
  var formComps = [$("form#"+ form_id +" input#player_card_id"), $("form#"+ form_id +" input#player_member_id"), $("form#"+ form_id +" input#player_player_name")];

  $("form#" + form_id + " input#create_player_submit").click(function(e) {
    e.preventDefault();

    if ( formValidated(form_id, formComps, lengthLimit) ) {
      $("form#"+ form_id).submit();
    }
  });
</script>

