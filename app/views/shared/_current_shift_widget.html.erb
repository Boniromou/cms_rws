<span class="shift_widget">Waiting for shift</span>

<script>
  $( document ).ready(function() {
    console.log($.shift_widget_loaded);
    if ( !$.shift_widget_loaded ) {
      $.shift_widget_loaded = true;
      console.log($.shift_widget_loaded);

      function updateShift() {
        var updateShiftInterval = <%= update_shift_interval %>
        console.log( updateShiftInterval );

        $.ajax({
          url: 'shifts/current',
          type: 'get',
          success: function(data) {
            $('.shift_widget').html(data);
          }
        });

        setTimeout(updateShift, updateShiftInterval);
      };

      updateShift();
    }
  });
</script>
